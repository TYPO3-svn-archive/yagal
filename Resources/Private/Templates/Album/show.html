{namespace gallery=Tx_Yagal_ViewHelpers}
<f:layout name="default" />

<f:section name="content">
	<div class="tx-galleryexample-single-item">
		<span class="tx-galleryexample-single-date"><f:format.date>{album.date}</f:format.date></span>
		<h3>
			{album.title}
		</h3>
		<p>{album.filepath}</p>
		<f:for each="{fotos}" as="foto">
			<li>
				o:<img src="{album.filepath}{foto.originalUrl}"></img><br />
				m:<img src="{album.filepath}{foto.maximalUrl}"></img><br />
				n:<img src="{album.filepath}{foto.normalUrl}"></img><br />
				t:<img src="{album.filepath}{foto.thumbUrl}"></img><br />
			</li>
		</f:for>
		<p class="bodytext"><f:format.nl2br>{album.content}

		hallo</f:format.nl2br></p>
		<p class="bodytext">By: {album.photographer.fullName}</p>
		<f:render partial="albumTags" arguments="{album: album}"/>
		<f:if condition="{album.relatedAlbums}">
			<div>Related albums:</div>
			<ul class="tx-galleryexample-related">
				<f:for each="{album.relatedAlbums}" as="relatedAlbum">
					<li>
						<f:link.action action="show" controller="Album" arguments="{album: relatedAlbum, gallery: album.gallery}">{relatedAlbum.title}</f:link.action>
					</li>
				</f:for>
			</ul>
		</f:if>
		<div class="tx-galleryexample-single-backlink">
			<f:link.action action="index" controller="Album" arguments="{gallery: album.gallery}">Back</f:link.action>
		</div>
	</div>
	<div class="tx-galleryexample-comment-list">
		<h3>Comments</h3>
		<f:for each="{album.comments}" as="comment">
			<div class="tx-galleryexample-comment">
				<div class="tx-galleryexample-comment-info">
					<span class="tx-galleryexample-comment-author">
						<gallery:gravatar emailAddress="{comment.email}" size="40" class="tx-galleryexample-gravatar" />
						<a href="mailto:{comment.email}">{comment.author}</a> albumed on
						<span class="tx-galleryexample-date"><f:format.date>{comment.date}</f:format.date></span>
					</span>
				</div>
				<div class="tx-galleryexample-comment-text">
					<f:format.nl2br>{comment.content}</f:format.nl2br>
				</div>
				<hr class="clear" />
			</div>
		</f:for>
	</div>
	<h4>Add your own</h4>
	<f:form name="newComment" method="album" controller="Comment" action="create" object="{newComment}" arguments="{album : album}">
		<f:form.errors for="newComment">
			<div class="error">
				<strong>{error.propertyName}</strong>: <f:for each="{error.errors}" as="errorDetail">{errorDetail.message}</f:for>
			</div>
		</f:form.errors>
		<label for="author">name <span class="required">(required)</span></label><br />
		<f:form.textbox id="author" property="author" />
		<br />
		<label for="email">email <span class="required">(required)</span></label><br />
		<f:form.textbox id="email" property="email" />
		<br />
		<label for="text">message <span class="required">(required)</span></label><br />
		<f:form.textarea id="text" property="content" rows="6" cols="46"/>
		<br />
		<f:form.submit class="submit" value="Submit"/>
	</f:form>
</f:section>
